/*
 Since 2007 PrestaShop SA and Contributors
 @license   https://opensource.org/licenses/OSL-3.0 Open Software License (OSL 3.0)
*/
window.ComfinoPaywallInit={init:()=>{const a=document.getElementById("comfino-iframe-container");document.getElementById("comfino-iframe-container")?.querySelector("#comfino-paywall-container")?.remove();if(null==a)ComfinoPaywallFrontend.logEvent("Comfino paywall iframe container not found.","warning");else if(null!==a.querySelector("#comfino-paywall-container")&&ComfinoPaywallFrontend.isFrontendInitSet())ComfinoPaywallFrontend.logEvent("Comfino paywall iframe already initialized.","info",a);else{var b=
ComfinoPaywallFrontend.createPaywallIframe(ComfinoPaywallData.paywallUrl,ComfinoPaywallData.paywallOptions),f=document.getElementById("pay-with-comfino")??document.querySelector('input[data-module-name^="comfino"]'),d=0;"priceModifier"in f.dataset&&(d=parseInt(f.dataset.priceModifier),Number.isNaN(d)?d=0:b.src+="&priceModifier="+d);ComfinoPaywallData.paywallOptions.onUpdateOrderPaymentState=c=>{ComfinoPaywallFrontend.logEvent("updateOrderPaymentState PrestaShop","debug",c);const k=new URL(ComfinoPaywallData.paywallStateUrl),
g=new FormData;c={loan_amount:c.loanAmount,loan_type:c.loanType,loan_term:c.loanTerm,price_modifier:d};for(let e in c)g.append(e,c[e]);const h=k.toString();fetch(h,{method:"POST",body:g}).then(e=>{ComfinoPaywallFrontend.logEvent("updateOrderPaymentState PrestaShop","debug",h,e)})};a.appendChild(b);ComfinoPaywallFrontend.init(f,b,ComfinoPaywallData.paywallOptions)}},initWithObserver:()=>{ComfinoPaywallInit.init();if(!ComfinoPaywallFrontend.isFrontendInitSet()){var a=document.getElementById("pay-with-comfino")??
document.querySelector('input[data-module-name^="comfino"]');if(a){ComfinoPaywallFrontend.logEvent("Paywall initialization with 'display' prop observer.","debug");const b=new MutationObserver(()=>{"block"===getComputedStyle(a).display&&(ComfinoPaywallInit.init(),ComfinoPaywallFrontend.isFrontendInitSet()&&b.disconnect())});b.observe(a,{attributes:!0,attributeFilter:["style"]})}}}};
"complete"===document.readyState?ComfinoPaywallInit.initWithObserver():document.addEventListener("readystatechange",()=>{"complete"===document.readyState&&ComfinoPaywallInit.initWithObserver()});
